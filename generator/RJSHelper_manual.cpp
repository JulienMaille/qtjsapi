
  // Automatically generated, do not edit
  
          #include "RJSHelper.h"
        
          #include "header_cpp.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qabstractitemmodel_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qabstractitemmodel_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdialog_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qcoreapplication_wrapper.h"
        
          #include "qguiapplication_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qpixmap_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayout_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayout_wrapper.h"
        
          #include "qboxlayout_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayout_wrapper.h"
        
          #include "qboxlayout_wrapper.h"
        
          #include "qgradient_wrapper.h"
        
          #include "qgradient_wrapper.h"
        
          #include "qgradient_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qiodevicebase_wrapper.h"
        
          #include "qiodevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractbutton_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdialog_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomcharacterdata_wrapper.h"
        
          #include "qdomcharacterdata_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomcharacterdata_wrapper.h"
        
          #include "qdomtext_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qdomnode_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qinputevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qpointerevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qinputevent_wrapper.h"
        
          #include "qpointerevent_wrapper.h"
        
          #include "qsinglepointevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qinputevent_wrapper.h"
        
          #include "qpointerevent_wrapper.h"
        
          #include "qsinglepointevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qinputevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qdropevent_wrapper.h"
        
          #include "qdragmoveevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qinputevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qdropevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qevent_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qfiledevice_wrapper.h"
        
          #include "qiodevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qiodevicebase_wrapper.h"
        
          #include "qiodevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdialog_wrapper.h"
        
          #include "qabstractfileiconprovider_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qabstractitemmodel_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qcombobox_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayout_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qgesture_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qgesture_wrapper.h"
        
          #include "qgesture_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qgraphicseffect_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qgraphicseffect_wrapper.h"
        
          #include "qgraphicseffect_wrapper.h"
        
          #include "qgraphicseffect_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayout_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qcoreapplication_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qiodevicebase_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qabstractitemdelegate_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qlistview_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdialog_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdialog_wrapper.h"
        
          #include "qabstractprintdialog_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qpagedpaintdevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qiodevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qdialog_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractbutton_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qjsengine_wrapper.h"
        
          #include "qqmlengine_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qjsengine_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwindow_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractbutton_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractslider_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractslider_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qabstractitemmodel_wrapper.h"
        
          #include "qabstractproxymodel_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractspinbox_wrapper.h"
        
          #include "qabstractspinbox_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qlayoutitem_wrapper.h"
        
          #include "qlayout_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qabstractitemmodel_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qstringconverterbase_wrapper.h"
        
          #include "qstringconverter_wrapper.h"
        
          #include "qstringconverter_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qtableview_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qtextedit_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qtextformat_wrapper.h"
        
          #include "qtextformat_wrapper.h"
        
          #include "qtextformat_wrapper.h"
        
          #include "qtextcharformat_wrapper.h"
        
          #include "qtextformat_wrapper.h"
        
          #include "qtextframeformat_wrapper.h"
        
          #include "qtextcharformat_wrapper.h"
        
          #include "qiodevicebase_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qabstractbutton_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qwidget_wrapper.h"
        
          #include "qframe_wrapper.h"
        
          #include "qabstractscrollarea_wrapper.h"
        
          #include "qabstractitemview_wrapper.h"
        
          #include "qtreeview_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qvalidator_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qvalidator_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qvalidator_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qpaintdevice_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qaction_wrapper.h"
        
          #include "qobject_wrapper.h"
        
          #include "qsurface_wrapper.h"
        
          #include "qxmlreader_wrapper.h"
        
          #include "qxmlcontenthandler_wrapper.h"
        
          #include "qxmlerrorhandler_wrapper.h"
        
          #include "qxmldtdhandler_wrapper.h"
        
          #include "qxmlentityresolver_wrapper.h"
        
          #include "qxmllexicalhandler_wrapper.h"
        
          #include "qxmldeclhandler_wrapper.h"
        
        QList<RJSDowncaster_QAction*> RJSHelper::downcasters_QAction;
      
        QList<RJSDowncaster_QApplication*> RJSHelper::downcasters_QApplication;
      
        QList<RJSDowncaster_QComboBox*> RJSHelper::downcasters_QComboBox;
      
        QList<RJSDowncaster_QEvent*> RJSHelper::downcasters_QEvent;
      
        QList<RJSDowncaster_QDockWidget*> RJSHelper::downcasters_QDockWidget;
      
        QList<RJSDowncaster_QFileSystemModel*> RJSHelper::downcasters_QFileSystemModel;
      
        QList<RJSDowncaster_QFrame*> RJSHelper::downcasters_QFrame;
      
        QList<RJSDowncaster_QItemDelegate*> RJSHelper::downcasters_QItemDelegate;
      
        QList<RJSDowncaster_QJSEngine*> RJSHelper::downcasters_QJSEngine;
      
        QList<RJSDowncaster_QLayout*> RJSHelper::downcasters_QLayout;
      
        QList<RJSDowncaster_QLineEdit*> RJSHelper::downcasters_QLineEdit;
      
        QList<RJSDowncaster_QListView*> RJSHelper::downcasters_QListView;
      
        QList<RJSDowncaster_QListWidget*> RJSHelper::downcasters_QListWidget;
      
        QList<RJSDowncaster_QMainWindow*> RJSHelper::downcasters_QMainWindow;
      
        QList<RJSDowncaster_QMdiArea*> RJSHelper::downcasters_QMdiArea;
      
        QList<RJSDowncaster_QMdiSubWindow*> RJSHelper::downcasters_QMdiSubWindow;
      
        QList<RJSDowncaster_QObject*> RJSHelper::downcasters_QObject;
      
        QList<RJSDowncaster_QQmlEngine*> RJSHelper::downcasters_QQmlEngine;
      
        QList<RJSDowncaster_QTextBrowser*> RJSHelper::downcasters_QTextBrowser;
      
        QList<RJSDowncaster_QToolBar*> RJSHelper::downcasters_QToolBar;
      
        QList<RJSDowncaster_QToolButton*> RJSHelper::downcasters_QToolButton;
      
        QList<RJSDowncaster_QTreeWidget*> RJSHelper::downcasters_QTreeWidget;
      
        QList<RJSDowncaster_QWidget*> RJSHelper::downcasters_QWidget;
      
        QList<RJSQVariantConverter*> RJSHelper::qvariantConverters;
      
        QString RJSHelper::getTypeName(int type) {
          RJSTypeEnum* t = RJSTypeEnum::getById(type);
          return t->getName();
        }
      
      /**
       * \return existing wrapper object for the given object in the context of the given engine.
       */
      QVariant getWrapperProperty(RJSApi& handler, const QObject& obj) {
          QJSEngine* engine = handler.getEngine();
          return obj.property((const char*)QString("%1__wrapper__").arg(engine->objectName()).toUtf8());
      }

      /**
       * Attaches the script wrapper to the original QObject as a property in the context of the given engine.
       */
      void setWrapperProperty(RJSApi& handler, QObject& obj, const QVariant& wrapper) {
          QJSEngine* engine = handler.getEngine();
          obj.setProperty((const char*)QString("%1__wrapper__").arg(engine->objectName()).toUtf8(), wrapper);
      }

      QJSValue getWrapperQJSValue(const QJSValue& v) {
          if (v.prototype().hasOwnProperty("__WRAPPER__")) {
              return v.prototype();
          }
          else {
              return v;
          }
      }

      QObject* getWrapperQObject(const QJSValue& v) {
          QJSValue w = getWrapperQJSValue(v);
          if (!w.isQObject()) {
              return nullptr;
          }
          return w.toQObject();
      }

      RJSWrapper* getWrapperRJSWrapper(const QJSValue& v) {
          return dynamic_cast<RJSWrapper*>(getWrapperQObject(v));
      }

      //
      // custom types (manual implementation):
      //

      QJSValue RJSHelper::cpp2js_bool(RJSApi& handler, bool v) {
          return QJSValue(v);
      }

      bool RJSHelper::js2cpp_bool(RJSApi& handler, const QJSValue& v) {
          if (!v.isBool() && !v.isNumber()) {
              return false;
          }
          return v.toBool();
      }

      bool RJSHelper::is_bool(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }

          // 20221122: don't allow numbers in test to distinguish between bool / int in function overrides (e.g. RAddObjectsOperation::addObject):
          // || v.isNumber();

          return v.isBool();
      }

      QString RJSHelper::js2cpp_char_ptr(RJSApi& handler, const QJSValue& v) {
          if (v.isNumber() && v.toInt()==0) {
              // JS can pass 0 for null string:
              return QString();
          }

          return v.toString();
      }

      bool RJSHelper::is_char_ptr(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          // accept 0 for char pointer (null string):
          return v.isString() || (v.isNumber() && v.toInt()==0);
      }

      QJSValue RJSHelper::cpp2js_char(RJSApi& handler, const char* v) {
          return QJSValue(*v);
      }

      QJSValue RJSHelper::cpp2js_QJSValue(RJSApi& handler, const QJSValue& v) {
          return v;
      }

      QJSValue RJSHelper::cpp2js_QVariant(RJSApi& handler, const QVariant& v) {
          if (v.isNull()) {
              return QJSValue();
          }

          if (v.userType()==QMetaType::QVariantList) {
              // convert QVariant list to QJSValue array:
              QList<QVariant> vList = v.toList();
              QJSEngine* engine = handler.getEngine();
              QJSValue ret = engine->newArray();
              for (int i=0; i<vList.length(); i++) {
                  QVariant vItem = vList[i];
                  ret.setProperty(i, RJSHelper::cpp2js_QVariant(handler, vItem));
              }
              return ret;
          }

          if (v.userType()==QMetaType::QVariantMap) {
              // convert QVariant map to QJSValue object:
              QMap<QString, QVariant> vMap = v.toMap();
              QJSEngine* engine = handler.getEngine();
              QJSValue ret = engine->newObject();
              QList<QString> keys = vMap.keys();
              for (int i=0; i<keys.length(); i++) {
                  QVariant vItem = vMap[keys[i]];
                  ret.setProperty(keys[i], RJSHelper::cpp2js_QVariant(handler, vItem));
              }
              return ret;
          }

          //QVariant_Wrapper* ret = new QVariant_Wrapper(handler, new QVariant(v), true);
          //QVariant* v = ret->getWrapped();
          //if (v!=nullptr) {
              switch (v.userType()) {
              case QMetaType::Bool:
                  return QJSValue(v.toBool());
              case QMetaType::Int:
                  return QJSValue(v.toInt());
      //        case QMetaType::LongLong:
      //            return QJSValue(v.toLongLong());
              case QMetaType::UInt:
                  return QJSValue(v.toUInt());
      //        case QMetaType::ULongLong:
      //            return QJSValue(v.toULongLong());
              case QMetaType::Double:
                  return QJSValue(v.toDouble());
              case QMetaType::QString:
                  return QJSValue(v.toString());

              case QMetaType::QByteArray:
                  return RJSHelper::cpp2js_QByteArray(handler, v.toByteArray());
              case QMetaType::QChar:
                  return RJSHelper::cpp2js_QChar(handler, v.toChar());
              case QMetaType::QDate:
                  return RJSHelper::cpp2js_QDate(handler, v.toDate());
              case QMetaType::QDateTime:
                  return RJSHelper::cpp2js_QDateTime(handler, v.toDateTime());
              case QMetaType::QEasingCurve:
                  return RJSHelper::cpp2js_QEasingCurve(handler, v.toEasingCurve());
      //        case QMetaType::QJsonArray:
      //            return RJSHelper::cpp2js_QJsonArray(handler, v.toJsonArray());
      //        case QMetaType::QJsonDocument:
      //            return RJSHelper::cpp2js_QJsonDocument(handler, v.toJsonDocument());
      //        case QMetaType::QJsonObject:
      //            return RJSHelper::cpp2js_QJsonObject(handler, v.toJsonObject());
      //        case QMetaType::QJsonValue:
      //            return RJSHelper::cpp2js_QJsonValue(handler, v.toJsonValue());
              case QMetaType::QLine:
                  return RJSHelper::cpp2js_QLine(handler, v.toLine());
              case QMetaType::QLineF:
                  return RJSHelper::cpp2js_QLineF(handler, v.toLineF());
      //        case QMetaType::QVariantList:
      //            return RJSHelper::cpp2js_QVariantList(handler, v.toList());
              case QMetaType::QLocale:
                  return RJSHelper::cpp2js_QLocale(handler, v.toLocale());
              case QMetaType::QModelIndex:
                  return RJSHelper::cpp2js_QModelIndex(handler, v.toModelIndex());
      //        case QMetaType::QPersistentModelIndex:
      //            return RJSHelper::cpp2js_QPersistentModelIndex(handler, v.toPersistentModelIndex());
              case QMetaType::QPoint:
                  return RJSHelper::cpp2js_QPoint(handler, v.toPoint());
              case QMetaType::QPointF:
                  return RJSHelper::cpp2js_QPointF(handler, v.toPointF());
              case QMetaType::QRect:
                  return RJSHelper::cpp2js_QRect(handler, v.toRect());
              case QMetaType::QRectF:
                  return RJSHelper::cpp2js_QRectF(handler, v.toRectF());
              case QMetaType::QRegularExpression:
                  return RJSHelper::cpp2js_QRegularExpression(handler, v.toRegularExpression());
              case QMetaType::QSize:
                  return RJSHelper::cpp2js_QSize(handler, v.toSize());
              case QMetaType::QSizeF:
                  return RJSHelper::cpp2js_QSizeF(handler, v.toSizeF());
              case QMetaType::QTime:
                  return RJSHelper::cpp2js_QTime(handler, v.toTime());
              case QMetaType::QUrl:
                  return RJSHelper::cpp2js_QUrl(handler, v.toUrl());
              case QMetaType::QColor:
                  return RJSHelper::cpp2js_QColor(handler, v.value<QColor>());
              case QMetaType::QPalette:
                  return RJSHelper::cpp2js_QPalette(handler, v.value<QPalette>());
      //        case QMetaType::QUuid:
      //            return RJSHelper::cpp2js_QUuid(handler, v.toUuid());

              // TODO: add more conversions:
              default:
                  break;
              }
          //}

          if (v.canConvert<QFont>()) {
              return RJSHelper::cpp2js_QFont(handler, v.value<QFont>());
          }

          if (v.canConvert<QPushButton*>()) {
              return RJSHelper::cpp2js_QPushButton(handler, v.value<QPushButton*>());
          }

          if (v.canConvert<QList<double> >()) {
              return RJSHelper::cpp2js_QList_double(handler, v.value<QList<double> >());
          }
          if (v.canConvert<QList<int> >()) {
              return RJSHelper::cpp2js_QList_int(handler, v.value<QList<int> >());
          }
          if (v.canConvert<QStringList>()) {
              return RJSHelper::cpp2js_QStringList(handler, v.value<QStringList>());
          }
          if (v.canConvert<QKeySequence>()) {
              return RJSHelper::cpp2js_QKeySequence(handler, v.value<QKeySequence>());
          }

          // hook to convert more types from other modules:
          for (int i=0; i<qvariantConverters.length(); i++) {
            RJSQVariantConverter* vc = qvariantConverters[i];
            QJSValue res = vc->fromVariant(handler, v);
            if (!res.isUndefined()) {
              return res;
            }
          }

          qWarning() << "RJSHelper::cpp2js_QVariant: unhandled variant type: " << v.userType() << " / " << v.metaType().name();

          QJSEngine* engine = handler.getEngine();
          // wrapper takes ownership of QVariant object:
          QVariant_Wrapper* ret = new QVariant_Wrapper(handler, new QVariant(v), true);
          //return engine->newQObject(ret);

          // JS: new QVariant('__GOT_WRAPPER__', wrapper)
          QJSValue cl = engine->globalObject().property("QVariant");
          QJSValueList args;
          args.append(QJSValue("__GOT_WRAPPER__"));
          args.append(QJSValue(false));
          args.append(engine->newQObject(ret));
          QJSValue r = cl.callAsConstructor(args);

          //engine->globalObject().setProperty("wrapper", engine->newQObject(ret));
          //QJSValue r = engine->evaluate("new QVariant('__GOT_WRAPPER__', wrapper);");

          if (r.isError()) {
              qWarning()
                      << "Uncaught exception in new QVariant(wrapper)"
                      << ":" << r.toString();
          }
          return r;
      }

      bool RJSHelper::is_QVariant(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              // make sure a missing parameter is not counted as a valid variant:
              // e.g. QComboBox::addItem(icon, text, userData) != QComboBox::addItem(text, userData)
              return acceptUndefined;
          }

          return true;
      }

      QVariant RJSHelper::js2cpp_QVariant(RJSApi& handler, const QJSValue& v) {
          if (v.isNumber()) {
              // value is number:
              return QVariant(v.toNumber());
          }
          if (v.isBool()) {
              // value is bool:
              return QVariant(v.toBool());
          }
          if (v.isString()) {
              // value is string:
              return QVariant(v.toString());
          }
          if (v.isArray()) {
              // value is an array:
              QList<QVariant> variantList;
              const int length = v.property("length").toInt();
              for (int i = 0; i < length; ++i) {
                  variantList.append(RJSHelper::js2cpp_QVariant(handler, v.property(i)));
              }
              return QVariant(variantList);
          }

          // hook to convert more types from other modules:
          for (int i=0; i<qvariantConverters.length(); i++) {
            RJSQVariantConverter* vc = qvariantConverters[i];
            QVariant res = vc->toVariant(handler, v);
            if (res.isValid()) {
              return res;
            }
          }

          RJSWrapper* wrapper = getWrapperRJSWrapper(v);
          if (wrapper==nullptr) {
              // only if we have no wrapper (i.e. unknown type to C++):
              // after custom conversions to prevent false matches to Object instead of specialized classes:
              if (v.isObject()) {
                // JS objects are converted to QVariantMap:
                return v.toVariant(QJSValue::ConvertJSObjects);
              }

              qWarning() << "RJSHelper::js2cpp_QVariant: no wrapper";
              handler.trace();
              return QVariant();
          }

          // value is QSize, QUrl, ...:

          int t = wrapper->getWrappedType();
          if (t==RJSType_QModelIndex::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QModelIndex(handler, v));
          }
          if (t==RJSType_QUrl::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QUrl(handler, v));
          }
          if (t==RJSType_QRegularExpression::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QRegularExpression(handler, v));
          }
          if (t==RJSType_QLocale::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QLocale(handler, v));
          }
          if (t==RJSType_QRectF::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QRectF(handler, v));
          }
          if (t==RJSType_QRect::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QRect(handler, v));
          }
          if (t==RJSType_QLineF::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QLineF(handler, v));
          }
          if (t==RJSType_QLine::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QLine(handler, v));
          }
          if (t==RJSType_QPointF::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QPointF(handler, v));
          }
          if (t==RJSType_QPoint::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QPoint(handler, v));
          }
          if (t==RJSType_QSizeF::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QSizeF(handler, v));
          }
          if (t==RJSType_QSize::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QSize(handler, v));
          }
          if (t==RJSType_QDateTime::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QDateTime(handler, v));
          }
          if (t==RJSType_QTime::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QTime(handler, v));
          }
          if (t==RJSType_QDate::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QDate(handler, v));
          }
          if (t==RJSType_QByteArray::getIdStatic()) {
            return QVariant(RJSHelper::js2cpp_QByteArray(handler, v));
          }
          if (t==RJSType_QWidget::getIdStatic()) {
            return QVariant::fromValue(RJSHelper::js2cpp_QWidget_ptr(handler, v));
          }
          if (t==RJSType_QToolBar::getIdStatic()) {
            return QVariant::fromValue(RJSHelper::js2cpp_QToolBar_ptr(handler, v));
          }
          if (t==RJSType_QPushButton::getIdStatic()) {
            return QVariant::fromValue(RJSHelper::js2cpp_QPushButton_ptr(handler, v));
          }
          if (t==RJSType_QPalette::getIdStatic()) {
            return QVariant::fromValue(RJSHelper::js2cpp_QPalette(handler, v));
          }
          if (t==RJSType_QKeySequence::getIdStatic()) {
            return QVariant::fromValue(RJSHelper::js2cpp_QKeySequence(handler, v));
          }
          if (t==RJSType_QFont::getIdStatic()) {
            return QVariant::fromValue(RJSHelper::js2cpp_QFont(handler, v));
          }
          if (t==RJSType_QVariant::getIdStatic()) {
            QVariant var = *(QVariant*)wrapper->getWrappedVoid();
            qDebug() << "variant:" << var;
            return var;
          }


          {
              QVariant var = *(QVariant*)wrapper->getWrappedVoid();
              if (var.canConvert<QList<QKeySequence> >()) {
                  return QVariant::fromValue(var.value<QList<QKeySequence> >());
              }
          }

          qWarning() << "unhandled QVariant type:" << RJSHelper::getTypeName(wrapper->getWrappedType());
          handler.trace();
          return *(QVariant*)wrapper->getWrappedVoid();

          

      }

      QJSValue RJSHelper::cpp2js_QObjectList(RJSApi& handler, const QList<QObject*>& v) {
          return RJSHelper::cpp2js_QList_QObject_ptr(handler, v);
      }

      QList<QObject*> RJSHelper::js2cpp_QObjectList(RJSApi& handler, const QJSValue& v) {
          return RJSHelper::js2cpp_QList_QObject_ptr(handler, v);
      }

      QJSValue RJSHelper::cpp2js_QObject(RJSApi& handler, QObject* v) {
          if (v==nullptr) {
              return QJSValue(QJSValue::UndefinedValue);
          }

          static QStringList ignoreList = {
            "QPropertyAnimation", 
            "QFormInternal::TranslationWatcher",
            "QItemSelectionModel",
            "QTableModel",
            "QStyledItemDelegate",
            "QWidgetTextControl",
            "QPlainTextEditControl",
            "QWidgetLineControl",
            "QTreeModel",
            "QComboMenuDelegate",
            "QStandardItemModel",
          };

          QString className = v->metaObject()->className();
          for (int i=0; i<ignoreList.length(); i++) {
            if (className==ignoreList[i]) {
              // silently ignore class:
              return QJSValue();
            }
          }

          if (v->isWidgetType()) {
              QWidget* o = qobject_cast<QWidget*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QWidget(handler, o);
              }
          }
          {
              QAction* o = qobject_cast<QAction*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QAction(handler, o);
              }
          }
          {
              QFile* o = qobject_cast<QFile*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QFile(handler, o);
              }
          }

          {
              QButtonGroup* o = qobject_cast<QButtonGroup*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QButtonGroup(handler, o);
              }
          }
          {
              QLayout* o = qobject_cast<QLayout*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QLayout(handler, o);
              }
          }


          for (int i=0; i<downcasters_QObject.length(); i++) {
              QJSValue dc = downcasters_QObject[i]->downcast(handler, v);
              if (!dc.isUndefined()) {
                  return dc;
              }
          }

          // don't return wrapper objects to prevent wrappers from being deleted in scripts (e.g. while destroying children):
          {
              RJSWrapperObj* o = qobject_cast<RJSWrapperObj*>(v);
              if (o!=nullptr) {
                  return QJSValue(QJSValue::UndefinedValue);
              }
          }
          // TODO: add more QObject but not QWidget or QLayout types

          qWarning() << "RJSHelper::cpp2js_QObject: not wrapping object:" << v->objectName() << " class: " << v->metaObject()->className();

          //QObject_Wrapper* ret = new QObject_Wrapper(handler, v, false);
          //return handler->newQObject(ret);

          /*
          QObject_Wrapper* ret = new QObject_Wrapper(handler, v, false);
          QJSEngine* engine = handler.getEngine();

          // JS: new QObject('__GOT_WRAPPER__', wrapper)
          QJSValue cl = engine->globalObject().property("QObject");
          QJSValueList args;
          args.append(QJSValue("__GOT_WRAPPER__"));
          args.append(QJSValue(false));
          args.append(engine->newQObject(ret));
          QJSValue r = cl.callAsConstructor(args);

          //engine->globalObject().setProperty("__wrapper__", engine->newQObject(ret));
          //QJSValue r = engine->evaluate("new QObject('__GOT_WRAPPER__', __wrapper__);");

          if (r.isError()) {
              qWarning()
                      << "Uncaught exception in new QObject(wrapper)"
                      << ":" << r.toString();
          }
          return r;
          */

          return QJSValue(QJSValue::UndefinedValue);
      }

      QObject* RJSHelper::js2cpp_QObject_ptr(RJSApi& handler, const QJSValue& v) {
          QJSValue jwrapper = getWrapperQJSValue(v);
          if (jwrapper.isNumber() && jwrapper.toInt()==0) {
              // 0 is allowed for pointers (null ptr):
              return nullptr;
          }
          if (!jwrapper.isQObject()) {
              //qWarning() << "RJSHelper::js2cpp_QObject: not a QObject";
              return nullptr;
          }
          QObject* obj = jwrapper.toQObject();
          //QObject_Wrapper* wrapper = qobject_cast<QObject_Wrapper*>(obj);
          RJSWrapper* wrapper = dynamic_cast<RJSWrapper*>(obj);
          //QObject_Wrapper* wrapper = (QObject_Wrapper*)obj;
          //QObject_Wrapper* wrapper = getWrapper<QObject_Wrapper>(v);
          if (wrapper==nullptr) {
              qWarning() << "RJSHelper::js2cpp_QObject: no wrapper";
              handler.trace();
              return nullptr;
          }
          //return (QObject*)wrapper->getWrappedVoid();
          return QObject_Wrapper::getWrappedBase(wrapper);

          //return wrapper->getWrapped();
      }

      bool RJSHelper::is_QObject_ptr(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          return v.isObject() || (v.isNumber() && v.toInt()==0);
      }

      QJSValue RJSHelper::cpp2js_QWidget(RJSApi& handler, QWidget* v) {
          {
              QMainWindow* o = qobject_cast<QMainWindow*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QMainWindow(handler, o);
              }
          }

          {
              QDockWidget* o = qobject_cast<QDockWidget*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QDockWidget(handler, o);
              }
          }


          // QComboBox:
          {
              QFontComboBox* o = qobject_cast<QFontComboBox*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QFontComboBox(handler, o);
              }
          }
          {
              QComboBox* o = qobject_cast<QComboBox*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QComboBox(handler, o);
              }
          }

          // QLineEdit:
          {
              QLineEdit* o = qobject_cast<QLineEdit*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QLineEdit(handler, o);
              }
          }


          {
              QSpinBox* o = qobject_cast<QSpinBox*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QSpinBox(handler, o);
              }
          }

          {
              QMenu* o = qobject_cast<QMenu*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QMenu(handler, o);
              }
          }

          {
              QMenuBar* o = qobject_cast<QMenuBar*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QMenuBar(handler, o);
              }
          }

          {
              QLabel* o = qobject_cast<QLabel*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QLabel(handler, o);
              }
          }
          {
              QToolButton* o = qobject_cast<QToolButton*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QToolButton(handler, o);
              }
          }
          {
              QToolBar* o = qobject_cast<QToolBar*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QToolBar(handler, o);
              }
          }
          {
              QPushButton* o = qobject_cast<QPushButton*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QPushButton(handler, o);
              }
          }
          {
              QGroupBox* o = qobject_cast<QGroupBox*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QGroupBox(handler, o);
              }
          }
          {
              QDialogButtonBox* o = qobject_cast<QDialogButtonBox*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QDialogButtonBox(handler, o);
              }
          }
          {
              QSplitter* o = qobject_cast<QSplitter*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QSplitter(handler, o);
              }
          }
          {
              QMdiSubWindow* o = qobject_cast<QMdiSubWindow*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QMdiSubWindow(handler, o);
              }
          }
          {
              QMdiArea* o = qobject_cast<QMdiArea*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QMdiArea(handler, o);
              }
          }
          {
              QScrollBar* o = qobject_cast<QScrollBar*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QScrollBar(handler, o);
              }
          }
          {
              QPlainTextEdit* o = qobject_cast<QPlainTextEdit*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QPlainTextEdit(handler, o);
              }
          }
          {
              QScrollArea* o = qobject_cast<QScrollArea*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QScrollArea(handler, o);
              }
          }
          {
              QCheckBox* o = qobject_cast<QCheckBox*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QCheckBox(handler, o);
              }
          }
          {
              QRadioButton* o = qobject_cast<QRadioButton*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QRadioButton(handler, o);
              }
          }

          // QTreeWidget:
          {
              QTreeWidget* o = qobject_cast<QTreeWidget*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QTreeWidget(handler, o);
              }
          }

          // QListWidget:
          {
              QListWidget* o = qobject_cast<QListWidget*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QListWidget(handler, o);
              }
          }

          // QTextEdit:
          {
              QTextBrowser* o = qobject_cast<QTextBrowser*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QTextBrowser(handler, o);
              }
          }
          {
              QTextEdit* o = qobject_cast<QTextEdit*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QTextEdit(handler, o);
              }
          }

          {
              QTabWidget* o = qobject_cast<QTabWidget*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QTabWidget(handler, o);
              }
          }
          {
              QSlider* o = qobject_cast<QSlider*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QSlider(handler, o);
              }
          }



          {
              QFrame* o = qobject_cast<QFrame*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QFrame(handler, o);
              }
          }
          {
              QDialog* o = qobject_cast<QDialog*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QDialog(handler, o);
              }
          }

          {
              QStatusBar* o = qobject_cast<QStatusBar*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QStatusBar(handler, o);
              }
          }

          {
              QProgressBar* o = qobject_cast<QProgressBar*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QProgressBar(handler, o);
              }
          }

          {
              QTabBar* o = qobject_cast<QTabBar*>(v);
              if (o!=nullptr) {
                  return RJSHelper::cpp2js_QTabBar(handler, o);
              }
          }

          for (int i=0; i<downcasters_QWidget.length(); i++) {
              QJSValue dc = downcasters_QWidget[i]->downcast(handler, v);
              if (!dc.isUndefined()) {
                  return dc;
              }
          }

          // TODO: add more QWidget types

          //QWidget_Wrapper* ret = new QWidget_Wrapper(handler, v, false);
          //return handler->newQObject(ret);



          QWidget_Wrapper* ret = nullptr;
          if (v) {
              // look up existing wrapper:
              QVariant var = getWrapperProperty(handler, *v);
              //qDebug() << "existing wrapper QVariant:" << var;
              ret = var.value<QWidget_Wrapper*>();
              if (ret==nullptr) {
                  if (var.isValid()) {
                      qWarning() << "RJSHelper::cpp2js_QWidget: invalid wrapper attached to QObject: " << var.typeName();
                      QObject_Wrapper* ow = var.value<QObject_Wrapper*>();
                      delete ow;
                  }
                  // create new wrapper:
                  //qDebug() << "creating new wrapper for " << (unsigned long long int)v;
                  ret = new QWidget_Wrapper(handler, v, false);
                  QVariant varNew = QVariant::fromValue(ret);
                  setWrapperProperty(handler, *v, varNew);
              }
          }
          else {
              // wrapper for nullptr:
              ret = new QWidget_Wrapper(handler, nullptr, false);
          }



          //QWidget_Wrapper* ret = new QWidget_Wrapper(handler, v);
          QJSEngine* engine = handler.getEngine();

          // JS: new QWidget('__GOT_WRAPPER__', wrapper)
          QJSValue cl = engine->globalObject().property("QWidget");
          QJSValueList args;
          args.append(QJSValue("__GOT_WRAPPER__"));
          args.append(QJSValue(false));
          args.append(engine->newQObject(ret));
          QJSValue r = cl.callAsConstructor(args);

          //engine->globalObject().setProperty("wrapper", engine->newQObject(ret));
          //QJSValue r = engine->evaluate("new QWidget('__GOT_WRAPPER__', wrapper);");
          if (r.isError()) {
              qWarning()
                      << "Uncaught exception in new QObject(wrapper)"
                      << ":" << r.toString();
          }
          return r;
      }

      QWidget* RJSHelper::js2cpp_QWidget_ptr(RJSApi& handler, const QJSValue& v) {
          QJSValue jwrapper = getWrapperQJSValue(v);
          if (jwrapper.isNumber() && jwrapper.toInt()==0) {
              // 0 is allowed for pointers (null ptr):
              return nullptr;
          }
          if (!jwrapper.isQObject()) {
              //qWarning() << "RJSHelper::js2cpp_QWidget: not a QObject";
              return nullptr;
          }
          QObject* obj = jwrapper.toQObject();
          RJSWrapper* wrapper = dynamic_cast<RJSWrapper*>(obj);
          //QWidget_Wrapper* wrapper = qobject_cast<QWidget_Wrapper*>(obj);
          //QWidget_Wrapper* wrapper = (QWidget_Wrapper*)obj;
          //QWidget_Wrapper* wrapper = getWrapper<QWidget_Wrapper>(v);
          if (wrapper==nullptr) {
              qWarning() << "RJSHelper::js2cpp_QWidget: no wrapper";
              handler.trace();
              return nullptr;
          }
          //return (QWidget*)wrapper->getWrappedVoid();
          //return wrapper->getWrapped();
          return QWidget_Wrapper::getWrappedBase(wrapper);
      }

      bool RJSHelper::is_QWidget_ptr(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          if (v.isNumber()) {
              return v.toInt()==0;
          }
          //return v.isObject() || (v.isNumber() && v.toInt()==0);
          //QJSValue fun = v.property("getObjectType");
          QJSValue fun = v.property("isOfObjectType");
          if (fun.isUndefined() || !fun.isCallable()) {
              //qDebug() << "cannot get type of JS object";
              //engine->evaluate("console.trace()");
              //return v.isObject();
              return false;
          }
          return fun.call(QJSValueList() << QJSValue(RJSType_QWidget::getIdStatic())).toBool();
          //return fun.call(RJSType::QWidget_Type);
          //return fun.call().toInt()==RJSType::QWidget_Type;
      }

      QJSValue RJSHelper::cpp2js_QDomDocument_ParseResult(RJSApi& handler, QDomDocument::ParseResult v) {
          QJSEngine* engine = handler.getEngine();
          QJSValue ret = engine->newObject();
          ret.setProperty("errorColumn", (int)v.errorColumn);
          ret.setProperty("errorLine", (int)v.errorLine);
          ret.setProperty("errorMessage", v.errorMessage);
          ret.setProperty("result", (bool)v);
          return ret;
      }

      QJSValue RJSHelper::cpp2js_QList_QPair_QString_QString(RJSApi& handler, const QList<QPair<QString,QString>>& v) {
          QJSEngine* engine = handler.getEngine();
          QJSValue ret = engine->newArray((uint)v.length());
          for (int i=0; i<v.length(); i++) {
              ret.setProperty((quint32)i, RJSHelper::cpp2js_QPair_QString_QString(handler, v.at(i)));
          }
          return ret;
      }

      QList<QPair<QString,QString>> RJSHelper::js2cpp_QList_QPair_QString_QString(RJSApi& handler, const QJSValue& v) {
          QList<QPair<QString,QString>> ret;

          if (!v.isArray()) {
              qWarning() << "RJSHelper::js2cpp_QList_QPair_QString,QString: value is not an array";
              return ret;
          }

          const int length = v.property("length").toInt();
          for (int i=0; i<length; ++i) {
              ret.append(RJSHelper::js2cpp_QPair_QString_QString(handler, v.property(i)));
          }

          return ret;
      }

      bool RJSHelper::is_QList_QPair_QString_QString(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          return v.isArray();
      }
      
  // ------------
  // dummy types:
  // ------------
  
      QJSValue RJSHelper::cpp2js_QCalendar(RJSApi& handler, const QCalendar& v) { return QJSValue(); }

      QCalendar RJSHelper::js2cpp_QCalendar(RJSApi& handler, const QJSValue& v) { ; return QCalendar(); }

      bool RJSHelper::is_QCalendar(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          return !v.isUndefined();
      }
    
      QJSValue RJSHelper::cpp2js_QFontInfo(RJSApi& handler, const QFontInfo& v) { return QJSValue(); }

      QFontInfo RJSHelper::js2cpp_QFontInfo(RJSApi& handler, const QJSValue& v) { QFont f; return QFontInfo(f); }

      bool RJSHelper::is_QFontInfo(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          return !v.isUndefined();
      }
    
      QJSValue RJSHelper::cpp2js_QTimeZone(RJSApi& handler, const QTimeZone& v) { return QJSValue(); }

      QTimeZone RJSHelper::js2cpp_QTimeZone(RJSApi& handler, const QJSValue& v) { ; return QTimeZone(); }

      bool RJSHelper::is_QTimeZone(RJSApi& handler, const QJSValue& v, bool acceptUndefined) {
          if (v.isUndefined() || v.isNull()) {
              return acceptUndefined;
          }
          return !v.isUndefined();
      }
    
      QJSValue RJSHelper::cpp2js_QList_QAction(RJSApi& handler, const QList<QAction*>& v) { return QJSValue(); }

      QList<QAction*> RJSHelper::js2cpp_QList_QAction(RJSApi& handler, const QJSValue& v) { return QList<QAction*>(); }
      